<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extract phenotypes from clinical events data — extract_phenotypes • ukbwranglr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Extract phenotypes from clinical events data — extract_phenotypes" />
<meta property="og:description" content="Filters a clinical events table created by tidy_clinical_events
for a set or sets of specified clinical codes that represent one or more
phenotypes. By default, the earliest date that any clinical code
appears in an individual participant's record is extracted. See also the
'Clinical
events' vignette on the ukbwranglr package website." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ukbwranglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rmgpanw/ukbwranglr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract phenotypes from clinical events data</h1>
    <small class="dont-index">Source: <a href='https://github.com/rmgpanw/ukbwranglr/blob/master/R/extract_phenotypes.R'><code>R/extract_phenotypes.R</code></a></small>
    <div class="hidden name"><code>extract_phenotypes.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Filters a clinical events table created by <code><a href='tidy_clinical_events.html'>tidy_clinical_events</a></code>
for a set or sets of specified clinical codes that represent one or more
phenotypes. By default, the <em>earliest</em> date that any clinical code
appears in an individual participant's record is extracted. See also the
<a href='https://rmgpanw.github.io/ukbwranglr/articles/ukb_clinical_events.html'>'Clinical
events'</a> vignette on the <code>ukbwranglr</code> package website.</p>
    </div>

    <pre class="usage"><span class='fu'>extract_phenotypes</span><span class='op'>(</span>
  <span class='va'>clinical_events</span>,
  <span class='va'>clinical_codes</span>,
  data_sources <span class='op'>=</span> <span class='cn'>NULL</span>,
  min_max <span class='op'>=</span> <span class='st'>"min"</span>,
  colnames_prefix <span class='op'>=</span> <span class='cn'>NULL</span>,
  labels_prefix <span class='op'>=</span> <span class='cn'>NULL</span>,
  workers <span class='op'>=</span> <span class='cn'>NULL</span>,
  keep_all <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>clinical_events</th>
      <td><p>A long format data frame created by
<code><a href='tidy_clinical_events.html'>tidy_clinical_events</a></code>, <code><a href='tidy_gp_clinical.html'>tidy_gp_clinical</a></code>,
<code><a href='tidy_gp_scripts.html'>tidy_gp_scripts</a></code> or <code><a href='make_clinical_events_db.html'>make_clinical_events_db</a></code>.
This can also be a <code><a href='https://dbplyr.tidyverse.org/reference/tbl.src_dbi.html'>tbl_dbi</a></code> object.</p></td>
    </tr>
    <tr>
      <th>clinical_codes</th>
      <td><p>data frame. Must match the format as per
<code><a href='example_clinical_codes.html'>example_clinical_codes</a></code>.</p></td>
    </tr>
    <tr>
      <th>data_sources</th>
      <td><p>A character vector of clinical events sources in
<code>clinical_events</code> to extract phenotypes from. Use
<code><a href='clinical_events_sources.html'>clinical_events_sources</a></code> (<code>source column</code>) for a list of
valid values.</p></td>
    </tr>
    <tr>
      <th>min_max</th>
      <td><p>Choose either "min" or "max" to extract either the earliest or
latest date that one of the codes appears in <code>clinical_codes</code> appears.</p></td>
    </tr>
    <tr>
      <th>colnames_prefix</th>
      <td><p>Optionally add a prefix to column names.</p></td>
    </tr>
    <tr>
      <th>labels_prefix</th>
      <td><p>Optionally add a prefix to variable labels.</p></td>
    </tr>
    <tr>
      <th>workers</th>
      <td><p>The number of processes to run in parallel when
<code>clinical_codes</code> includes multiple diseases. This is used to set the
number of workers in <code><a href='https://future.futureverse.org/reference/plan.html'>plan</a></code> with <code>strategy =
<a href='https://future.futureverse.org/reference/multisession.html'>multisession</a></code>, which is passed on to
<code><a href='https://rdrr.io/pkg/furrr/man/future_map.html'>future_map</a></code>. If <code>NULL</code>, then no processing is
performed sequentially. Default value is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>keep_all</th>
      <td><p>If <code>TRUE</code>, keep all matching codes for each eid in a
nested data frame column named 'data'.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A named list of data frames, one for each disease. Each data frame
  has an "eid" column, and "event_min/max_indicator" and "event_min/max_date"
  columns for each phenotype in the 'category' column of
  <code>clinical_codes</code> for that disease. If <code>keep_all</code> is <code>TRUE</code>,
  then there will also be additional nested data frame column called 'data'.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='dummy_main_dataset_clinical_events.html'>dummy_main_dataset_clinical_events</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='tidy_clinical_events.html'>tidy_clinical_events</a></span><span class='op'>(</span>clinical_events_sources <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"summary_hes_icd10"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind.html'>bind_rows</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>extract_phenotypes</span><span class='op'>(</span>
    clinical_codes <span class='op'>=</span> <span class='fu'><a href='example_clinical_codes.html'>example_clinical_codes</a></span><span class='op'>(</span><span class='op'>)</span>,
    data_sources <span class='op'>=</span> <span class='st'>"f41270"</span>,
    min_max <span class='op'>=</span> <span class='st'>"min"</span>
  <span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Alasdair Warwick.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


