<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Derive simplified ethnic background — derive_ethnic_background_simplified • ukbwranglr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Derive simplified ethnic background — derive_ethnic_background_simplified"><meta property="og:description" content="Simplifies ethnic background in a UK Biobank main dataset to the main
categories for
Field ID 21000."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ukbwranglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/ukbwranglr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/rmgpanw/ukbwranglr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Derive simplified ethnic background</h1>
    <small class="dont-index">Source: <a href="https://github.com/rmgpanw/ukbwranglr/blob/HEAD/R/derived_variables.R" class="external-link"><code>R/derived_variables.R</code></a></small>
    <div class="hidden name"><code>derive_ethnic_background_simplified.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Simplifies ethnic background in a UK Biobank main dataset to the main
categories for
<a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=21000" class="external-link">Field ID 21000</a>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">derive_ethnic_background_simplified</span><span class="op">(</span></span>
<span>  <span class="va">ukb_main</span>,</span>
<span>  ukb_data_dict <span class="op">=</span> <span class="fu"><a href="get_ukb_data_dict.html">get_ukb_data_dict</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ethnicity_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"White"</span>, <span class="st">"Mixed"</span>, <span class="st">"Asian or Asian British"</span>,</span>
<span>    <span class="st">"Black or Black British"</span>, <span class="st">"Chinese"</span>, <span class="st">"Other ethnic group"</span><span class="op">)</span>,</span>
<span>  .drop <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  .details_only <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>ukb_main</dt>
<dd><p>A UK Biobank main dataset.</p></dd>


<dt>ukb_data_dict</dt>
<dd><p>The UKB data dictionary (available online at the UK
Biobank
<a href="https://biobank.ndph.ox.ac.uk/showcase/exinfo.cgi?src=AccessingData" class="external-link">data
showcase</a>. This should be a data frame where all columns are of type
<code>character</code>.</p></dd>


<dt>ethnicity_levels</dt>
<dd><p>The factor level order for the appended
<code>ethnic_background_simplified</code> column. By default, the baseline level
is set to "White" ethnicity.</p></dd>


<dt>.drop</dt>
<dd><p>If <code>TRUE</code>, remove the required input columns from the
result</p></dd>


<dt>.details_only</dt>
<dd><p>If <code>TRUE</code>, return a list containing details of
required input variables (Field IDs) and derived variables (new column
name, label and values/value labels).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame with a column called <code>ethnic_background_simplified</code></p>


<p>(type factor).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Categories "Do not know" and "Prefer not to answer" are converted to
<code>NA</code>. A new column called <code>ethnic_background_simplified</code> of type
factor is appended to the input data frame. By default, "White" ethnicity is
set to the baseline level as this is the largest category. Levels can be
explicitly specified using the <code>ethnicity_levels</code> argument.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># dummy UKB data and data dictionary</span></span></span>
<span class="r-in"><span><span class="va">dummy_ukb_data_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_Data_Dictionary_Showcase.tsv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dummy_ukb_codings</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_Codings.tsv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dummy_ukb_main</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_ukb.html">read_ukb</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_ukb_main.tsv"</span>, path_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ukb_data_dict <span class="op">=</span> <span class="va">dummy_ukb_data_dict</span>,</span></span>
<span class="r-in"><span>  ukb_codings <span class="op">=</span> <span class="va">dummy_ukb_codings</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Creating data dictionary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> STEP 1 of 3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reading data into R</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> STEP 2 of 3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Renaming with descriptive column names</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> STEP 3 of 3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Applying variable and value labels</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Labelling dataset</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Time taken: 0 minutes, 1 seconds.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># derive ethnic background</span></span></span>
<span class="r-in"><span><span class="fu">derive_ethnic_background_simplified</span><span class="op">(</span></span></span>
<span class="r-in"><span>  ukb_main <span class="op">=</span> <span class="va">dummy_ukb_main</span>,</span></span>
<span class="r-in"><span>  ukb_data_dict <span class="op">=</span> <span class="va">dummy_ukb_data_dict</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"ethnic"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ethnic_background_f21000_0_0 ethnic_background_f21000_1_0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:                  Do not know                        Mixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:         Prefer not to answer    White and Black Caribbean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:                        White      White and Black African</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:                      British              White and Asian</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:                        Irish   Any other mixed background</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:   Any other white background       Asian or Asian British</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:                         &lt;NA&gt;                       Indian</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:                         &lt;NA&gt;                      Chinese</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:                    Caribbean                         &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:                    Caribbean                         &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ethnic_background_f21000_2_0 ethnic_background_simplified</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:                  Bangladeshi                        Mixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:   Any other Asian background                        Mixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:                  Do not know                        White</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:                    Caribbean                        White</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:                      African                        White</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:   Any other Black background                        White</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:                      Chinese       Asian or Asian British</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:                         &lt;NA&gt;                      Chinese</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:                         &lt;NA&gt;       Black or Black British</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:                         &lt;NA&gt;       Black or Black British</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alasdair Warwick.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

