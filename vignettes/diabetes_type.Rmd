---
title: "Ascertaining and subclassifying diabetes in the UKB"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Ascertaining and subclassifying diabetes in the UKB}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(ukbwranglr)
```

# Arguments

# Value

# Notes

## UK Biobank fields for diabetes status

Diabetes status of UK Biobank participants at recruitment was ascertained from the following sources:

  - [Touchscreen questionnaire](http://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100025)
  - [Verbal interview](https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100071)
  
Diabetes status may also be ascertained from the following linked data sources:

  - [Primary care data](https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=3000)
  - [Hopital inpatient data](https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=2000)
  - Death Register records ([primary](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=40001) and [secondary](https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=40002) causes of death)

UK Biobank also provides ['first occurrence'](https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=1712) fields for conditions that map to 3-character ICD-10 codes. These algorithmically extract the earliest recorded date for each condition across all the above sources, *except* for the touchscreen questionnaire.

## Diabetes subtype - pitfalls

1. Using first occurrence fields, many ppts have codes for both T1 and T2 DM.
1. Using date of earliest recorded diabetes code as the date of diabetes diagnosis produces relatively old ages of onset for T1DM. This may reflect the fact that electronic health records were only introduced relatively recently.
