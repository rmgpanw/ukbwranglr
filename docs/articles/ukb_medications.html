<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UKB medication history • ukbwranglr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="UKB medication history">
<meta property="og:description" content="ukbwranglr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ukbwranglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ukbwranglr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/diabetes_type.html">Ascertaining and subclassifying diabetes in the UKB</a>
    </li>
    <li>
      <a href="../articles/misc_ukb_codings.html">Misc: UKB codings</a>
    </li>
    <li>
      <a href="../articles/ukb_disease_outcomes.html">UKB: Disease outcomes</a>
    </li>
    <li>
      <a href="../articles/ukb_load_pheno_subset.html">UKB: Load selected columns</a>
    </li>
    <li>
      <a href="../articles/ukb_medications.html">UKB medication history</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ukb_medications_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>UKB medication history</h1>
            
      
      
      <div class="hidden name"><code>ukb_medications.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>Medication history for UK Biobank participants may be ascertained from the following sources:</p>
<ul>
<li><a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=100075">Self-report data</a></li>
<li><a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=3000">Primary care data</a></li>
</ul>
<blockquote>
<p><strong>Note:</strong> the preceding links for self-report data relate to verbal interview responses. Self-report data also includes <a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100025">touchscreen</a> responses, however UKB <a href="https://biobank.ndph.ox.ac.uk/ukb/refer.cgi?id=596">resource 596</a> recommends that the verbal interview data fields are used in preference</p>
</blockquote>
</div>
<div id="self-report-data-verbal-interview" class="section level1">
<h1 class="hasAnchor">
<a href="#self-report-data-verbal-interview" class="anchor"></a>Self-report data (<a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=100075">verbal interview</a>)</h1>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20003">FieldID 20003</a> records data on type and number of medications taken, coded with data coding(<a href="https://biobank.ndph.ox.ac.uk/showcase/coding.cgi?id=4" class="uri">https://biobank.ndph.ox.ac.uk/showcase/coding.cgi?id=4</a>). <a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=20076">FieldID 20076</a> records data on type and number of medications taken in Read code format but this does not seem to be available yet(?) Participants were not asked to provide the dates when they started these medications, however <a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=53">FieldID 53</a> records the date when participants attended the assessment centre.</p>
</div>
<div id="ascertaining-medication-history" class="section level2">
<h2 class="hasAnchor">
<a href="#ascertaining-medication-history" class="anchor"></a>Ascertaining medication history</h2>
<ol style="list-style-type: decimal">
<li>Reshape these fields to long format (see below)</li>
<li>Filter for medications of interest (I cannot find a mapping file to convert these to Read codes)</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/field_id_pivot_longer.html">field_id_pivot_longer</a></span><span class="op">(</span>
  <span class="va">dummy_ukb_data</span>,
  field_id <span class="op">=</span> <span class="fl">20003</span>,
  data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>,
  ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>
<span class="op">)</span> 
<span class="co">#&gt; # A tibble: 14,100 x 4</span>
<span class="co">#&gt;    eid   f20003                 f20003_value                      instance_array</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;                  &lt;ord&gt;                             &lt;chr&gt;         </span>
<span class="co">#&gt;  1 1     treatment_medication_… sodium cromoglicate+isoprenaline… 0_0           </span>
<span class="co">#&gt;  2 1     treatment_medication_… triamterene+furosemide 50mg/40mg… 0_1           </span>
<span class="co">#&gt;  3 1     treatment_medication_… magnesium carbonate               0_2           </span>
<span class="co">#&gt;  4 1     treatment_medication_… imtack 1.25mg spray               0_3           </span>
<span class="co">#&gt;  5 1     treatment_medication_… dihydroergotamine mesylate        0_4           </span>
<span class="co">#&gt;  6 1     treatment_medication_… simple ointment bp                0_5           </span>
<span class="co">#&gt;  7 1     treatment_medication_… elidel 1% cream                   0_6           </span>
<span class="co">#&gt;  8 1     treatment_medication_… bzt - bendrofluazide              0_7           </span>
<span class="co">#&gt;  9 1     treatment_medication_… primaxin iv 250mg intravenous in… 0_8           </span>
<span class="co">#&gt; 10 1     treatment_medication_… medinol over six 250mg/5ml s/f s… 0_9           </span>
<span class="co">#&gt; # … with 14,090 more rows</span>

<span class="co"># if you want to recode</span>
<span class="co">#   recode_ukbcol( </span>
<span class="co">#     col_to_recode = "f20003_value",</span>
<span class="co">#     field_id = "20003",</span>
<span class="co">#     ukb_data_dict = dummy_data_dict,</span>
<span class="co">#     ukb_codings = ukb_codings %&gt;% filter(Value != "1195")</span>
<span class="co">#   )</span></code></pre></div>
</div>
</div>
<div id="primary-care-data" class="section level1">
<h1 class="hasAnchor">
<a href="#primary-care-data" class="anchor"></a>Primary care data</h1>
<div id="introduction-1" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-1" class="anchor"></a>Introduction</h2>
<p>The interim release primary care dataset covers ~50% of the full UK Biobank cohort and is provided in 3 tables:</p>
<ol style="list-style-type: decimal">
<li>Clinical events</li>
<li>Prescriptions</li>
<li>Registrations</li>
</ol>
<p>Only the prescriptions table will be considered here. This consists of 55 million rows rows with the following columns:</p>
<ul>
<li>
<code>eid</code>: unique participant identifier</li>
<li>
<code>data_provider</code>: England (Vision or TPP), Scotland or Wales</li>
<li>
<code>issue_date</code>: date prescription was issued</li>
<li>
<code>read_2</code>: Read 2 code</li>
<li><code>bnf_code</code></li>
<li><code>dmd_code</code></li>
<li><code>drug_name</code></li>
<li>
<code>quantity</code>: quantity prescribed</li>
</ul>
<p>Issues:</p>
<ul>
<li><p>Each of the 4 data providers uses different coding styles [TODO: INSERT FIGURE]</p></li>
<li><p>Incorrect codes (do not match free text description)</p></li>
<li><p>Missing drug codes, necessitating reliance on free text</p></li>
<li>
<p>Free text issues:</p>
<ul>
<li>Proprietary drug names</li>
<li>Niche applications e.g. beta blocker eye drops</li>
<li>Regular expressions searches e.g. searching for “Torem” (loop diuretic) also matches “Toremifene” (breast cancer drug)</li>
</ul>
</li>
<li><p>Combination drugs only correspond to one BNF paragraph</p></li>
</ul>
<p>Approaches:</p>
<ol style="list-style-type: decimal">
<li>Use drug codes (Read2 fpr Wales) only:</li>
</ol>
<ul>
<li>How many eids have free text but no drug code?</li>
<li>Would miss combination drugs</li>
</ul>
<p><em>See resources 591 and 592 for fiurther information (available from <a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=3000">here</a>).</em></p>
</div>
<div id="ascertaining-medication-history-1" class="section level2">
<h2 class="hasAnchor">
<a href="#ascertaining-medication-history-1" class="anchor"></a>Ascertaining medication history</h2>
<ul>
<li>DMD</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bnf_chembl</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html">fread</a></span><span class="op">(</span><span class="va">BNF_CHEMBL</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alasdair Warwick.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
