<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Misc: UKB codings • ukbwranglr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Misc: UKB codings">
<meta property="og:description" content="ukbwranglr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ukbwranglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ukbwranglr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/diabetes_type.html">Ascertaining and subclassifying diabetes in the UKB</a>
    </li>
    <li>
      <a href="../articles/misc_ukb_codings.html">Misc: UKB codings</a>
    </li>
    <li>
      <a href="../articles/ukb_disease_outcomes.html">UKB: Disease outcomes</a>
    </li>
    <li>
      <a href="../articles/ukb_load_pheno_subset.html">UKB: Load selected columns</a>
    </li>
    <li>
      <a href="../articles/ukb_medications.html">UKB medication history</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="misc_ukb_codings_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Misc: UKB codings</h1>
            
            <h4 class="date">29 January, 2021</h4>
      
      
      <div class="hidden name"><code>misc_ukb_codings.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>Explore UKB codings:</p>
<ul>
<li>
<p>Categorical codings:</p>
<ul>
<li>Some Codings contain code values with multiple meanings. This has implications for mapping</li>
<li>Example: FieldID 20002 (self-reported non-cancer illnesses) has multiple values coded as ‘-1’. If relabelling these coded values, ‘-1’ will only be converted to a single label. This would also be problematic if attempting to map back to the coded value, for example, if you then wanted to ‘re-map’ from the coded value to ICD-10 codes (see <a href="https://biobank.ndph.ox.ac.uk/showcase/coding.cgi?id=609">data-coding 609</a>) i.e. meaning -&gt; code -&gt; ICD-10 code</li>
<li>For FieldID 20002, I think the ‘-1’ codes can be removed (if they are even present) as none of these were ‘selectable’ according to the <a href="https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=6">UKB data showcase website</a> and ‘-1’ is the only code value with multiple asssociated meanings (99999 is also ‘not selectable’, but only maps to a single meaning “unclassifiable”)</li>
</ul>
</li>
</ul>
</div>
<div id="categorical" class="section level1">
<h1 class="hasAnchor">
<a href="#categorical" class="anchor"></a>Categorical</h1>
<ul>
<li>Number of categorical codings</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">categorical_codings</span> <span class="op">&lt;-</span> <span class="va">ukb_data_dict</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">ValueType</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Categorical single"</span>, <span class="st">"Categorical multiple"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">select</span><span class="op">(</span><span class="va">ValueType</span>, <span class="va">Coding</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">distinct</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="va">ValueType</span><span class="op">)</span>

<span class="va">categorical_codings</span>
<span class="co">#&gt;                 ValueType Coding</span>
<span class="co">#&gt;   1: Categorical multiple 100305</span>
<span class="co">#&gt;   2: Categorical multiple 100288</span>
<span class="co">#&gt;   3: Categorical multiple 100289</span>
<span class="co">#&gt;   4: Categorical multiple 100292</span>
<span class="co">#&gt;   5: Categorical multiple 100295</span>
<span class="co">#&gt;  ---                            </span>
<span class="co">#&gt; 417:   Categorical single 100013</span>
<span class="co">#&gt; 418:   Categorical single 100011</span>
<span class="co">#&gt; 419:   Categorical single 100012</span>
<span class="co">#&gt; 420:   Categorical single 100693</span>
<span class="co">#&gt; 421:   Categorical single   2171</span></code></pre></div>
<ul>
<li>Number of categorical codings which include values with multiple meanings</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">categorical_codings_with_multiple_meanings_per_value</span>
<span class="co">#&gt; # A tibble: 4 x 4</span>
<span class="co">#&gt; # Groups:   Coding [4]</span>
<span class="co">#&gt;   Coding data              has_duplicate_coding_va… list_of_troublesome_coding_…</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;list&gt;            &lt;lgl&gt;                    &lt;list&gt;                      </span>
<span class="co">#&gt; 1 3      &lt;tibble [89 × 2]&gt; TRUE                     &lt;chr [1]&gt;                   </span>
<span class="co">#&gt; 2 5      &lt;tibble [270 × 2… TRUE                     &lt;chr [1]&gt;                   </span>
<span class="co">#&gt; 3 6      &lt;tibble [474 × 2… TRUE                     &lt;chr [1]&gt;                   </span>
<span class="co">#&gt; 4 87     &lt;tibble [13,710 … TRUE                     &lt;chr [1]&gt;</span></code></pre></div>
<ul>
<li>Which FieldIDs use these 4 codings?</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ukb_data_dict</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Coding</span> <span class="op">%in%</span> <span class="va">categorical_codings_with_multiple_meanings_per_value</span><span class="op">$</span><span class="va">Coding</span><span class="op">)</span>
<span class="co">#&gt;                                                                    Path</span>
<span class="co">#&gt; 1: UK Biobank Assessment Centre &gt; Verbal interview &gt; Medical conditions</span>
<span class="co">#&gt; 2: UK Biobank Assessment Centre &gt; Verbal interview &gt; Medical conditions</span>
<span class="co">#&gt; 3:         UK Biobank Assessment Centre &gt; Verbal interview &gt; Operations</span>
<span class="co">#&gt; 4:                            Health-related outcomes &gt; Cancer register</span>
<span class="co">#&gt; 5:     Health-related outcomes &gt; Hospital inpatient &gt; Summary Diagnoses</span>
<span class="co">#&gt; 6:     Health-related outcomes &gt; Hospital inpatient &gt; Summary Diagnoses</span>
<span class="co">#&gt; 7:     Health-related outcomes &gt; Hospital inpatient &gt; Summary Diagnoses</span>
<span class="co">#&gt;    Category FieldID                                  Field Participants   Items</span>
<span class="co">#&gt; 1:   100074   20001             Cancer code, self-reported        45611   53317</span>
<span class="co">#&gt; 2:   100074   20002 Non-cancer illness code, self-reported       385860 1125842</span>
<span class="co">#&gt; 3:   100076   20004                         Operation code       398632  993531</span>
<span class="co">#&gt; 4:   100092   40013                   Type of cancer: ICD9        11222   15241</span>
<span class="co">#&gt; 5:     2002   41203                  Diagnoses - main ICD9        20303   42828</span>
<span class="co">#&gt; 6:     2002   41205             Diagnoses - secondary ICD9         8714   17289</span>
<span class="co">#&gt; 7:     2002   41271                       Diagnoses - ICD9        20303   58699</span>
<span class="co">#&gt;    Stability            ValueType Units ItemType  Strata  Sexed Instances Array</span>
<span class="co">#&gt; 1:  Complete Categorical multiple  &lt;NA&gt;     Data Derived Unisex         4     6</span>
<span class="co">#&gt; 2:  Complete Categorical multiple  &lt;NA&gt;     Data Derived Unisex         4    34</span>
<span class="co">#&gt; 3:  Complete Categorical multiple  &lt;NA&gt;     Data Derived Unisex         4    32</span>
<span class="co">#&gt; 4:  Accruing   Categorical single  &lt;NA&gt;     Data Primary Unisex        15     1</span>
<span class="co">#&gt; 5:   Ongoing Categorical multiple  &lt;NA&gt;     Data Primary Unisex         1    28</span>
<span class="co">#&gt; 6:   Ongoing Categorical multiple  &lt;NA&gt;     Data Primary Unisex         1    30</span>
<span class="co">#&gt; 7:   Ongoing Categorical multiple  &lt;NA&gt;     Data Primary Unisex         1    47</span>
<span class="co">#&gt;    Coding</span>
<span class="co">#&gt; 1:      3</span>
<span class="co">#&gt; 2:      6</span>
<span class="co">#&gt; 3:      5</span>
<span class="co">#&gt; 4:     87</span>
<span class="co">#&gt; 5:     87</span>
<span class="co">#&gt; 6:     87</span>
<span class="co">#&gt; 7:     87</span>
<span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Notes</span>
<span class="co">#&gt; 1:                                                                                                                                                                                                                                                          Code for cancer. If the participant was uncertain of the type of cancer they had had, then they described it to the interviewer (a trained nurse) who attempted to place it within the coding tree. If the cancer could not be located in the coding tree then the interviewer entered a free-text description of it. These free-text descriptions were subsequently examined by a doctor and, where possible, matched to entries in the coding tree. Free-text descriptions which could not be matched with very high probability have been marked as "unclassifiable".</span>
<span class="co">#&gt; 2:                                                                                               Code for non-cancer illness. If the participant was uncertain of the type of illness they had had, then they described it to the interviewer (a trained nurse) who attempted to place it within the coding tree. If the illness could not be located in the coding tree then the interviewer entered a free-text description of it. These free-text descriptions were subsequently examined by a doctor and, where possible, matched to entries in the coding tree. Free-text descriptions which could not be matched with very high probability have been marked as "unclassifiable".   Note that myasthenia gravis appears twice (under codes 1260 and 1437). Please ensure you use both codes to capture all relevant diagnoses.</span>
<span class="co">#&gt; 3:                                                                                                                                                                                                                                           Code for operation. If the participant was uncertain of the type of operation they had undergone, then they described it to the interviewer (a trained nurse) who attempted to place it within the coding tree. If the operation could not be located in the coding tree then the interviewer entered a free-text description of it. These free-text descriptions were subsequently examined by a doctor and, where possible, matched to entries in the coding tree. Free-text descriptions which could not be matched with very high probability have been marked as "unclassifiable".</span>
<span class="co">#&gt; 4:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             The ICD9 code for the type of cancer. Acquired from central registry.</span>
<span class="co">#&gt; 5:                                                                                                                                                                                                                                                                                                                    This field is a summary of the distinct primary/main diagnosis codes a participant has had recorded across all their hospital inpatient records. Diagnoses are coded according to the International Classification of Diseases version-9 (ICD-9).   The corresponding date each primary/main diagnosis code was first recorded in each participant's hospital inpatient records is given in ~F41263~.  Please note ICD-9 coded hospital inpatient data are only available for older Scottish hospital records.</span>
<span class="co">#&gt; 6: This field is a summary of the distinct secondary diagnoses codes a participant has had recorded across all their hospital inpatient records. Diagnoses are coded according to the International Classification of Diseases version-9 (ICD-9). There is no corresponding field giving the first date that each code appeared in a secondary position.  If you are interested in ICD-9 diagnoses recorded as either a primary or secondary diagnosis, please see ~F41271~, and its corresponding date ~F41281~.  In order to conduct detailed analyses of the data using the source information, researchers will need to gain access to the HESIN_DIAG and HESIN tables by adding ~F41234~ and ~F41259~ to their basket.  Please note ICD-9 coded hospital inpatient data are only available for older Scottish hospital records.</span>
<span class="co">#&gt; 7:                                                                                                                                                                                                                                                                                                         This field is a summary of the distinct diagnosis codes a participant has had recorded across all their hospital inpatient records in either the primary or secondary position. Diagnoses are coded according to the International Classification of Disease version 9 (ICD-9).  The corresponding date each diagnosis was first recorded in each participant's hospital inpatient records is given in ~F41281~.  Please note ICD-9 coded hospital inpatient data are only available for older Scottish hospital records.</span>
<span class="co">#&gt;                                                   Link</span>
<span class="co">#&gt; 1: http://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20001</span>
<span class="co">#&gt; 2: http://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20002</span>
<span class="co">#&gt; 3: http://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20004</span>
<span class="co">#&gt; 4: http://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=40013</span>
<span class="co">#&gt; 5: http://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41203</span>
<span class="co">#&gt; 6: http://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41205</span>
<span class="co">#&gt; 7: http://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41271</span></code></pre></div>
<blockquote>
<p>Manually looking at codings 3, 5 and 6 on the UKB data showcase website, I think I can safely remove ‘-1’ values from any mapping procedures (all non-selectable) - it would not be possible to know which ‘Meaning’ is indicated by ‘-1’ anyway. ‘99999’ was also non-selectable, however it ony maps to a single value, so should not affect mapping procedures.</p>
</blockquote>
<blockquote>
<p>Coding 87 refers t0 ICD-9 codes. The only coding value with multiple meanings is ‘Chapter V’, which has 2 associated meanings:</p>
</blockquote>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">coding_87</span> <span class="op">&lt;-</span> <span class="va">ukb_codings</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Coding</span> <span class="op">==</span> <span class="fl">87</span><span class="op">)</span>

<span class="va">coding_87</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">Value</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;   Value         n</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 Chapter V     2</span>

<span class="va">coding_87</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Value</span> <span class="op">==</span> <span class="st">"Chapter V"</span><span class="op">)</span>
<span class="co">#&gt;    Coding     Value</span>
<span class="co">#&gt; 1:     87 Chapter V</span>
<span class="co">#&gt; 2:     87 Chapter V</span>
<span class="co">#&gt;                                                                                                           Meaning</span>
<span class="co">#&gt; 1: Chapter V - Supplementary classification of factors influencing health status and contact with health services</span>
<span class="co">#&gt; 2:                                                                           Chapter V Mental disorders (230-319)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alasdair Warwick.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
