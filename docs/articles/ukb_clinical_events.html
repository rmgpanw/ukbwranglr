<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clinical events • ukbwranglr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Clinical events">
<meta property="og:description" content="ukbwranglr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ukbwranglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/code-mapping.html">Clinical codes - lookups and mappings</a>
    </li>
    <li>
      <a href="../articles/ukb_clinical_events.html">Clinical events</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ukb_clinical_events_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Clinical events</h1>
            
      
      
      <div class="hidden name"><code>ukb_clinical_events.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>Disease outcomes in UKB may be primarily ascertained from the following sources:</p>
<ul>
<li>
<a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100074">Self-report data</a>: <a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20001">cancer</a> and <a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20002">non-cancer</a>
</li>
<li><a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=2000">Hospital inpatient data</a></li>
<li><a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100093">Death register records</a></li>
<li><a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=100092">Cancer register data</a></li>
<li><a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=3000">Primary care data</a></li>
</ul>
<blockquote>
<p><strong>Note:</strong> the preceding links for self-report data relate to verbal interview responses. Self-report data also includes <a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100025">touchscreen</a> responses, however UKB <a href="https://biobank.ndph.ox.ac.uk/ukb/refer.cgi?id=596">resource 596</a> recommends that the verbal interview data fields are used in preference</p>
</blockquote>
<p>UKB also provides a set of ‘<a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=1712">first occurrences</a>’ fields, which record the earliest date a 3-character ICD-10 code (e.g. ICD-10 code ‘E11’ = ‘Non-insulin-dependent diabetes mellitus’) appears in one of the categories listed above. <strong>Note: this does not include cancer codes, as these are comprehensively captured by the <a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100092">cancer register data</a></strong></p>
<p>Other sources to consider include:</p>
<ul>
<li>‘<a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=42">Algorithmically-defined outcomes</a>’</li>
<li>Operations (self-reported; codes are otherwise included in the data sources considered here)</li>
<li>Medication history (e.g. classify participants as having diabetes if they take insulin) - see <code>vignette("ukb_medications")</code>
</li>
</ul>
<p>The rest of this article details how disease outcomes may be extracted from each of the data sources outlined above using <code>ukbwranglr</code>.</p>
</div>
<div id="setup" class="section level1">
<h1 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># download dummy data, full UKB data dictionary and codings files</span>
<span class="va">dummy_data_filepath</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_dummy_ukb_data_to_tempdir.html">download_dummy_ukb_data_to_tempdir</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Downloaded dummy UKB data to `tempdir()`. Returning path to file</span>
<span class="va">ukb_data_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ukb_data_dict.html">get_ukb_data_dict</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">ukb_codings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ukb_codings.html">get_ukb_codings</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># make data dictionary</span>
<span class="va">dummy_data_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_data_dict.html">make_data_dict</a></span><span class="op">(</span>ukb_pheno <span class="op">=</span> <span class="va">dummy_data_filepath</span>, 
                                  ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span>,
                                  delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span>

<span class="co"># read dummy data into R</span>
<span class="va">dummy_ukb_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_pheno.html">read_pheno</a></span><span class="op">(</span><span class="va">dummy_data_filepath</span>, 
                             data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>,
                             ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span>,
                             ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>,
                             delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span> 
<span class="co">#&gt; Reading selected columns for raw phenotype data</span>
<span class="co">#&gt; Processing categorical variables +/- cleaning dates/continuous variables...</span>
<span class="co">#&gt; Converting dates...</span>
<span class="co">#&gt; Converting continuous variables...</span>
<span class="co">#&gt; Converting integer variables...</span>
<span class="co">#&gt; Renaming columns...</span>
<span class="co">#&gt; Complete! Time taken: 0 minutes, 5 seconds</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of continuous/integer fields in this dataset that still have "uncleaned" special values: 0</span></code></pre></div>
</div>
<div id="self-report-data-verbal-interview" class="section level1">
<h1 class="hasAnchor">
<a href="#self-report-data-verbal-interview" class="anchor"></a>Self-report data (<a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=100074">verbal interview</a>)</h1>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>FieldID’s for self-reported (verbal interview) disease outcomes are categorised into ‘non-cancer’ and ‘cancer’:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Field</th>
<th>Non-cancer</th>
<th>Cancer</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Illness code, self-reported</td>
<td>
<a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20002">20002</a> (<a href="https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=6">data-coding 6</a>)</td>
<td>
<a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20001">20001</a> ( <a href="https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=3">data-coding 3</a>)</td>
</tr>
<tr class="even">
<td align="left">Interpolated year when first diagnosed</td>
<td><a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20008">20008</a></td>
<td><a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20006">20006</a></td>
</tr>
<tr class="odd">
<td align="left">Interpolated age when first diagnosed</td>
<td><a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20009">20009</a></td>
<td><a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=20007">20007</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>NOTE:</strong> Field IDs 20006 and 20008 (interpolated year when cancer/non-cancer illness, respectively, first diagnosed) include <a href="https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=13">‘special’ dates</a>. These are set to <code>NA</code> by the functions described below.</p>
</blockquote>
<p>UK Biobank also provides mappings from self-reported non-cancer illness codes to 3-character ICD-10 codes (<a href="https://biobank.ndph.ox.ac.uk/showcase/coding.cgi?id=609">data-coding 609</a>).</p>
<blockquote>
<p><strong>NOTE:</strong> Not all the self-report codes are mapped to ICD-10 (111 out of 447). For example, the non-cancer illness code <code>1065</code> refers to ‘hypertension’, which cannot be mapped to ICD-10 as it is too non-specific Code <code>1072</code>, which refers to ‘essential hypertension’ however <em>is</em> mappable (maps to ICD-10 code <code>I10</code>). Run the code below to explore this further.</p>
</blockquote>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Self-report codes that do not map to ICD-10 may be identified as follows:</span>
<span class="co"># filter UKB codings file for coding 609</span>
<span class="va">ukb_codings_609</span> <span class="op">&lt;-</span> <span class="va">ukb_codings</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Coding</span> <span class="op">==</span> <span class="st">"609"</span><span class="op">)</span>

<span class="co"># get the full set of UKB self-report non-cancer illness codes form website</span>
<span class="co"># https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=6</span>
<span class="va">html_page</span> <span class="op">&lt;-</span>
  <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="st">"https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=6"</span><span class="op">)</span>

<span class="va">table_nodes</span> <span class="op">&lt;-</span> <span class="fu">xml2</span><span class="fu">::</span><span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html">xml_find_all</a></span><span class="op">(</span><span class="va">html_page</span>, <span class="st">"//table"</span><span class="op">)</span>

<span class="va">ukb_selfreport_non_cancer_codings_readable</span> <span class="op">&lt;-</span>
  <span class="fu">rvest</span><span class="fu">::</span><span class="fu"><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table</a></span><span class="op">(</span><span class="va">table_nodes</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>

<span class="co"># filter for those that were selectable (i.e. no 'special' values like -1)</span>
<span class="va">ukb_selfreport_non_cancer_codings_readable</span> <span class="op">&lt;-</span>
  <span class="va">ukb_selfreport_non_cancer_codings_readable</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Selectable</span> <span class="op">==</span> <span class="st">"Yes"</span><span class="op">)</span>

<span class="co"># filter for those NOT mapped to ICD-10 and view</span>
<span class="va">ukb_selfreport_non_cancer_codings_readable</span> <span class="op">&lt;-</span>
  <span class="va">ukb_selfreport_non_cancer_codings_readable</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">Coding</span> <span class="op">%in%</span> <span class="va">ukb_codings_609</span><span class="op">$</span><span class="va">Value</span><span class="op">)</span><span class="op">)</span>

<span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">ukb_selfreport_codings_readable_no_special_values_not_in_ukb_codings_609</span><span class="op">)</span></code></pre></div>
<blockquote>
<p><strong>NOTE:</strong> Self-reported cancer conditions are <em>not</em> mapped to ICD10 as they are comprehensively captured by the cancer register. They are also <em>not</em> included in the ‘first occurrences’ data fields (see <a href="https://biobank.ndph.ox.ac.uk/showcase/refer.cgi?id=593">resource 593</a>)</p>
</blockquote>
</div>
<div id="identifying-health-outcomes-using-diagnostic-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-health-outcomes-using-diagnostic-codes" class="anchor"></a>Identifying health outcomes using diagnostic codes</h2>
<div id="non-cancer-medical-conditions" class="section level3">
<h3 class="hasAnchor">
<a href="#non-cancer-medical-conditions" class="anchor"></a>Non-cancer medical conditions</h3>
<p><strong>Step 1:</strong> A long format table summarising all self-reported non-cancer medical conditions (coded as per <a href="https://biobank.ndph.ox.ac.uk/showcase/coding.cgi?id=6">data coding 6</a>) for each UK Biobank participant can be created as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">self_report_non_cancer_diagnoses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_self_report_non_cancer_diagnoses.html">get_self_report_non_cancer_diagnoses</a></span><span class="op">(</span>
  ukb_pheno <span class="op">=</span> <span class="va">dummy_ukb_data</span>, <span class="co"># dataset read into R using read_pheno()</span>
  data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>, <span class="co"># data dictionary created with pheno_data_dict()</span>
  ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>, <span class="co"># the UKB codings file</span>
  remove_special_dates <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># set special values to `NA` (see data coding 13: https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=13)</span>
<span class="op">)</span></code></pre></div>
<p>Alternatively, this can be created using <a href="https://biobank.ndph.ox.ac.uk/showcase/coding.cgi?id=609">ICD10 code mappings</a> (see note above):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">self_report_non_cancer_diagnoses_icd10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_self_report_non_cancer_diagnoses_icd10.html">get_self_report_non_cancer_diagnoses_icd10</a></span><span class="op">(</span>
  ukb_pheno <span class="op">=</span> <span class="va">dummy_ukb_data</span>, 
  data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>,
  ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>,
  remove_special_dates <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p><strong>Step 2:</strong> These may then be used to retrieve UK Biobank participants with one or more specified codes in these records, as well as the earliest recorded date (i.e. the earliest date for any one of these codes):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select ICD10 codes</span>
<span class="va">selected_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A014"</span>, <span class="st">"N12"</span>, <span class="st">"L86"</span><span class="op">)</span>

<span class="co"># extract eids with these codes, as well as the earliest recorded date</span>
<span class="fu"><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event</a></span><span class="op">(</span><span class="va">self_report_non_cancer_diagnoses_icd10</span>,
                                 <span class="va">selected_codes</span>,
                                 min_max <span class="op">=</span> <span class="st">"min"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># display first few rows only</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   eid    source       code  date      </span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     </span>
<span class="co">#&gt; 1 fake4  f20002_icd10 N12   1985-06-14</span>
<span class="co">#&gt; 2 fake5  f20002_icd10 N12   1983-09-06</span>
<span class="co">#&gt; 3 fake7  f20002_icd10 N12   1978-03-19</span>
<span class="co">#&gt; 4 fake13 f20002_icd10 N12   2007-09-30</span>
<span class="co">#&gt; 5 fake15 f20002_icd10 N12   1998-06-06</span>
<span class="co">#&gt; 6 fake22 f20002_icd10 N12   1989-12-12</span></code></pre></div>
</div>
<div id="cancer" class="section level3">
<h3 class="hasAnchor">
<a href="#cancer" class="anchor"></a>Cancer</h3>
<p>Follow the same work flow as for non-cancer medical conditions, using <code>get_self_report_cancer_diagnoses</code> instead for step 1.</p>
</div>
</div>
</div>
<div id="hospital-inpatient-data---summary-diagnoses" class="section level1">
<h1 class="hasAnchor">
<a href="#hospital-inpatient-data---summary-diagnoses" class="anchor"></a>Hospital inpatient data - summary diagnoses</h1>
<div id="introduction-1" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-1" class="anchor"></a>Introduction</h2>
<p>These fields (<a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=2002">category 2002</a>) summarise diagnoses made during hospital inpatient admissions, recorded as either ICD9 or ICD10 codes:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Field</th>
<th>ICD9</th>
<th>ICD10</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Diagnoses</td>
<td>
<a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41271">41271</a> (<a href="https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=87">data-coding 87</a>)</td>
<td>
<a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41270">41270</a> (<a href="https://biobank.ndph.ox.ac.uk/ukb/coding.cgi?id=19">data-coding 19</a>)</td>
</tr>
<tr class="even">
<td align="left">Date of first in-patient diagnosis</td>
<td><a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41281">41281</a></td>
<td><a href="https://biobank.ndph.ox.ac.uk/ukb/field.cgi?id=41280">41280</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> Diagnoses are categorised into main and secondary diagnoses, with separate FieldIDs provided for both (further subdivided into ICD-9 and ICD-10). The table above lists those summary fields which include both main and secondary diagnoses.</p>
</blockquote>
<p><em>See also <a href="https://biobank.ndph.ox.ac.uk/ukb/refer.cgi?id=141140">resource 141140</a> for further details re hospital inpatient data</em></p>
</div>
<div id="identifying-health-outcomes-using-diagnostic-codes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-health-outcomes-using-diagnostic-codes-1" class="anchor"></a>Identifying health outcomes using diagnostic codes</h2>
<p>Use the same work flow as described for self-report data. To generate a long format table summarising all self-reported non-cancer medical conditions for each UK Biobank participant, use <code><a href="../reference/get_hes_icd10_diagnoses.html">get_hes_icd10_diagnoses()</a></code> or <code><a href="../reference/get_hes_icd9_diagnoses.html">get_hes_icd9_diagnoses()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">hes_icd10_diagnoses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hes_icd10_diagnoses.html">get_hes_icd10_diagnoses</a></span><span class="op">(</span>
  <span class="va">ukb_pheno</span>, <span class="co"># dataset read into R using read_pheno()</span>
  <span class="va">data_dict</span>, <span class="co"># data dictionary created with pheno_data_dict()</span>
  <span class="va">ukb_codings</span> <span class="co"># the UKB codings file</span>
<span class="op">)</span></code></pre></div>
<p>Then use <code><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select ICD10 codes</span>
<span class="va">selected_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A014"</span>, <span class="st">"N12"</span>, <span class="st">"L86"</span><span class="op">)</span>

<span class="co"># extract eids with these codes, as well as the earliest recorded date</span>
<span class="fu"><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event</a></span><span class="op">(</span><span class="va">hes_icd10_diagnoses</span>,
                                 <span class="va">selected_codes</span>,
                                 min_max <span class="op">=</span> <span class="st">"min"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># display first few rows only</span></code></pre></div>
</div>
</div>
<div id="death-register-records" class="section level1">
<h1 class="hasAnchor">
<a href="#death-register-records" class="anchor"></a>Death register records</h1>
<div id="introduction-2" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-2" class="anchor"></a>Introduction</h2>
<p>Cause of death data <a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=100093">category 100093</a> is available as part of a main UK Biobank dataset as ICD10 codes under FieldIDs <a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=40001">40001</a> (primary cause of death) and <a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=40002">40002</a> (secondary causes of death).</p>
<p>See also <a href="https://biobank.ndph.ox.ac.uk/showcase/refer.cgi?id=115559">resource 115559</a> for more information.</p>
</div>
<div id="identifying-health-outcomes-using-diagnostic-codes-2" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-health-outcomes-using-diagnostic-codes-2" class="anchor"></a>Identifying health outcomes using diagnostic codes</h2>
<p>Use the same work flow as described for self-report data. To generate a long format table summarising all self-reported non-cancer medical conditions for each UK Biobank participant, use <code><a href="../reference/get_death_data_icd10_diagnoses.html">get_death_data_icd10_diagnoses()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">death_data_icd10_diagnoses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_death_data_icd10_diagnoses.html">get_death_data_icd10_diagnoses</a></span><span class="op">(</span>
  <span class="va">dummy_ukb_data</span>, <span class="co"># dataset read into R using read_pheno()</span>
  <span class="va">dummy_data_dict</span>, <span class="co"># data dictionary created with pheno_data_dict()</span>
  <span class="va">ukb_codings</span> <span class="co"># the UKB codings file</span>
<span class="op">)</span></code></pre></div>
<p>Then use <code><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select ICD10 codes</span>
<span class="va">selected_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A014"</span>, <span class="st">"N12"</span>, <span class="st">"L86"</span>, <span class="st">"M7704"</span><span class="op">)</span>

<span class="co"># extract eids with these codes, as well as the earliest recorded date</span>
<span class="fu"><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event</a></span><span class="op">(</span><span class="va">death_data_icd10_diagnoses</span>,
                                 <span class="va">selected_codes</span>,
                                 min_max <span class="op">=</span> <span class="st">"min"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># display first few rows only</span></code></pre></div>
</div>
</div>
<div id="cancer-register-records" class="section level1">
<h1 class="hasAnchor">
<a href="#cancer-register-records" class="anchor"></a>Cancer register records</h1>
<div id="introduction-3" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-3" class="anchor"></a>Introduction</h2>
<p>Coded data on cancer diagnoses (<a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=100092">category 100092</a>) obtained through linkage to the national cancer registries are available from the following fields:</p>
<table class="table">
<thead><tr class="header">
<th>FieldID</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=40013">40013</a></td>
<td align="left">Type of cancer: ICD9</td>
</tr>
<tr class="even">
<td><a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=40006">40006</a></td>
<td align="left">Type of cancer: ICD10</td>
</tr>
<tr class="odd">
<td><a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=40008">40008</a></td>
<td align="left">Age at cancer diagnosis</td>
</tr>
<tr class="even">
<td><a href="https://biobank.ndph.ox.ac.uk/showcase/field.cgi?id=40005">40005</a></td>
<td align="left">Date of cancer diagnosis</td>
</tr>
</tbody>
</table>
<p><em>See also <a href="https://biobank.ndph.ox.ac.uk/showcase/refer.cgi?id=115558">resource 115558</a> for further details re cancer register data</em></p>
</div>
<div id="identifying-health-outcomes-using-diagnostic-codes-3" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-health-outcomes-using-diagnostic-codes-3" class="anchor"></a>Identifying health outcomes using diagnostic codes</h2>
<p>Use the same work flow as described for self-report data. To generate a long format tables (ICD-9 and ICD-10) summarising all cancer conditions recorded for each UK Biobank participant, use <code><a href="../reference/get_cancer_register_icd9_diagnoses.html">get_cancer_register_icd9_diagnoses()</a></code> and <code><a href="../reference/get_cancer_register_icd10_diagnoses.html">get_cancer_register_icd10_diagnoses()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cancer_register_icd9_diagnoses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_cancer_register_icd9_diagnoses.html">get_cancer_register_icd9_diagnoses</a></span><span class="op">(</span>
  ukb_pheno <span class="op">=</span> <span class="va">dummy_ukb_data</span>,
  data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>,
  ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>
<span class="op">)</span>

<span class="va">cancer_register_icd10_diagnoses</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_cancer_register_icd10_diagnoses.html">get_cancer_register_icd10_diagnoses</a></span><span class="op">(</span>
  ukb_pheno <span class="op">=</span> <span class="va">dummy_ukb_data</span>, 
  data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>, 
  ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>
<span class="op">)</span></code></pre></div>
<p>Then use <code><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select ICD10 codes</span>
<span class="va">selected_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A001"</span>, <span class="st">"A156"</span>, <span class="st">"E111"</span><span class="op">)</span>

<span class="co"># extract eids with these codes, as well as the earliest recorded date</span>
<span class="fu"><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event</a></span><span class="op">(</span><span class="va">cancer_register_icd10_diagnoses</span>,
                                 <span class="va">selected_codes</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># display first few rows only</span></code></pre></div>
</div>
</div>
<div id="ascertaining-disease-outcomes-from-multiple-sources" class="section level1">
<h1 class="hasAnchor">
<a href="#ascertaining-disease-outcomes-from-multiple-sources" class="anchor"></a>Ascertaining disease outcomes from multiple sources</h1>
<p>Supply a list of functions from the ‘get all diagnostic codes’ family to <code><a href="../reference/get_all_diagnostic_codes_multi.html">get_all_diagnostic_codes_multi()</a></code> (see function documentation for defaults), then apply <code><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event()</a></code> to the result:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># list of functions</span>
<span class="va">list_of_get_diagnostic_codes_functions</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="va">get_self_report_non_cancer_diagnoses</span>,
    <span class="va">get_self_report_non_cancer_diagnoses_icd10</span>,
    <span class="va">get_hes_icd10_diagnoses</span>,
    <span class="va">get_cancer_register_icd10_diagnoses</span>
  <span class="op">)</span>

<span class="co"># select ICD10 codes</span>
<span class="va">selected_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A001"</span>, <span class="st">"A156"</span>, <span class="st">"E111"</span><span class="op">)</span>

<span class="co"># get all diagnostic codes for selected data sources</span>
<span class="va">diagnostic_codes_multiple_sources</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/get_all_diagnostic_codes_multi.html">get_all_diagnostic_codes_multi</a></span><span class="op">(</span>ukb_pheno <span class="op">=</span> <span class="va">dummy_ukb_data</span>,
                                 data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>,
                                 ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>,
                                 function_list <span class="op">=</span> <span class="va">list_of_get_diagnostic_codes_functions</span><span class="op">)</span>
<span class="co">#&gt; Processing get diagnosis function 1 of 4</span>
<span class="co">#&gt; Processing get diagnosis function 2 of 4</span>
<span class="co">#&gt; Time taken: 0 minutes, 1 seconds.</span>
<span class="co">#&gt; Processing get diagnosis function 3 of 4</span>
<span class="co">#&gt; Time taken: 0 minutes, 1 seconds.</span>
<span class="co">#&gt; Processing get diagnosis function 4 of 4</span>
<span class="co">#&gt; Time taken: 0 minutes, 2 seconds.</span>
<span class="co">#&gt; Complete!</span>
<span class="co">#&gt; Time taken: 0 minutes, 2 seconds.</span>

<span class="co"># extract eids with these codes, as well as the earliest recorded date (display</span>
<span class="co"># first few rows only)</span>
<span class="fu"><a href="../reference/extract_first_or_last_clinical_event.html">extract_first_or_last_clinical_event</a></span><span class="op">(</span><span class="va">diagnostic_codes_multiple_sources</span>,
                                 <span class="va">selected_codes</span>,
                                 min_max <span class="op">=</span> <span class="st">"min"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 x 4</span>
<span class="co">#&gt;   eid    source code  date      </span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     </span>
<span class="co">#&gt; 1 fake1  f41270 E111  1969-09-03</span>
<span class="co">#&gt; 2 fake2  f41270 A156  1988-08-17</span>
<span class="co">#&gt; 3 fake64 f41270 A156  1983-11-20</span>
<span class="co">#&gt; 4 fake77 f41270 E111  1965-11-01</span></code></pre></div>
</div>
<div id="primary-care-data" class="section level1">
<h1 class="hasAnchor">
<a href="#primary-care-data" class="anchor"></a>Primary care data</h1>
<div id="introduction-4" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-4" class="anchor"></a>Introduction</h2>
<p>The interim release primary care dataset covers ~50% of the full UK Biobank cohort and is provided in 3 tables:</p>
<ol style="list-style-type: decimal">
<li>Clinical events</li>
<li>Prescriptions</li>
<li>Registrations</li>
</ol>
<p>Only the clinical events table will be considered here. This consists of &gt;120 million rows with the following columns:</p>
<ul>
<li>
<code>eid</code>: unique participant identifier</li>
<li>
<code>event_dt</code>: record date</li>
<li>
<code>read_2</code>: Read 2 code</li>
<li>
<code>read_2</code>: Read 3 code</li>
<li>
<code>value_1</code>, <code>value_2</code> and <code>value_3</code>: free text values (e.g. blood pressure measurements)</li>
</ul>
<p><em>See resources 591 and 592 for further information (available from <a href="https://biobank.ndph.ox.ac.uk/showcase/label.cgi?id=3000">here</a>).</em></p>
</div>
<div id="identifying-health-outcomes-using-diagnostic-codes-4" class="section level2">
<h2 class="hasAnchor">
<a href="#identifying-health-outcomes-using-diagnostic-codes-4" class="anchor"></a>Identifying health outcomes using diagnostic codes</h2>
<p><strong>Step 1:</strong> Write the UKB primary care clinical events dataset to a table in a SQLite database (the database will be created if it does not already exist). The <code><a href="../reference/file_to_sqlite_db.html">file_to_sqlite_db()</a></code> function reads a file in chunks (chunk size as specified by the <code>chunk_size</code>), pre-processes the ‘chunk’ if the <code>data_processing_function</code> is not set to <code>NULL</code>, then writes to a SQLite database. The <code>gp_clinical_to_sqlite_db</code> function reshapes and formats the data to match output from <code>get_all_diagnostic_codes_multi</code>. By default, special date values are set to <code>NA</code> (see <a href="https://biobank.ndph.ox.ac.uk/ukb/refer.cgi?id=591">resource 591</a> for further details).</p>
<p>The interim release primary care clinical events file is ~4GB large with &gt;120 million rows. Writing to a database may take ~5 minutes.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a database connection (this will create a new database if it does not already exist)</span>
<span class="va">con</span> <span class="op">=</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"ukb.db"</span><span class="op">)</span>

<span class="co"># write to table</span>
<span class="fu"><a href="../reference/file_to_sqlite_db.html">file_to_sqlite_db</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"PATH_TO_GP_CLINICAL.TXT"</span>, 
             db_path <span class="op">=</span> <span class="st">"PATH_TO_DATABASE"</span>,
             table <span class="op">=</span> <span class="st">"clinical_events"</span>,
             chunk_size <span class="op">=</span> <span class="fl">500000</span>,
             delim <span class="op">=</span> <span class="st">"\t"</span>,
             append <span class="op">=</span> <span class="cn">FALSE</span>,
             verbose <span class="op">=</span> <span class="cn">TRUE</span>,
             data_processing_function <span class="op">=</span> <span class="va">gp_clinical_to_sqlite_db</span>,
             remove_special_dates <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </code></pre></div>
<p><strong>Step 2:</strong> Filter for selected codes - retrieve the table using <code><a href="https://dplyr.tidyverse.org/reference/tbl.html">dplyr::tbl()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code> for selected codes, read the results into R with <code><a href="https://dplyr.tidyverse.org/reference/compute.html">dplyr::collect()</a></code> and convert the ‘date’ column to date format:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># retrieve table</span>
<span class="va">clinical_events</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html">tbl</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"clinical_events"</span><span class="op">)</span> 

<span class="co"># filter for selected codes</span>
<span class="va">selected_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Xa8Pl"</span>, <span class="st">"246A."</span><span class="op">)</span>
<span class="va">eids_with_selected_codes</span> <span class="op">&lt;-</span> <span class="va">clinical_events</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">code</span> <span class="op">%in%</span> <span class="va">selected_codes</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">collect</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><strong>Step 3:</strong> Then use <code>extract_first_or_last_clinical_event</code> to identify participants with specific codes of interest in their record. See the <a href="https://dbplyr.tidyverse.org/articles/dbplyr.html">dbplyr getting started vignette</a> for a good overview of querying databases using <code>dplyr</code> syntax.</p>
</div>
</div>
<div id="combining-all-diagnostic-codes-into-a-sqlite-database" class="section level1">
<h1 class="hasAnchor">
<a href="#combining-all-diagnostic-codes-into-a-sqlite-database" class="anchor"></a>Combining all diagnostic codes into a SQLite database</h1>
<p><strong>Step 1:</strong> Follow ‘step 1’ in ‘Primary care data’, if not already done.</p>
<p><strong>Step 2:</strong> Append to this the output from get_all_diagnostic_codes_multi (set the <code>append</code> argument in <code>dbWriteTable</code> to <code>TRUE</code>).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get diagnostic codes from ukb pheno data</span>
<span class="va">diagnostic_codes_multiple_sources</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/get_all_diagnostic_codes_multi.html">get_all_diagnostic_codes_multi</a></span><span class="op">(</span>ukb_pheno <span class="op">=</span> <span class="va">dummy_ukb_data</span>,
                                 data_dict <span class="op">=</span> <span class="va">dummy_data_dict</span>,
                                 ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span><span class="op">)</span>

<span class="co"># append to `clinical_events` table</span>
<span class="fu"><a href="../reference/main_dataset_diagnoses_to_sqlite_db.html">main_dataset_diagnoses_to_sqlite_db</a></span><span class="op">(</span><span class="va">diagnostic_codes_multiple_sources</span>,
                                                <span class="st">"clinical_events"</span>,
                                                db_path <span class="op">=</span> <span class="st">"PATH_TO_DATABASE"</span>,
                                                overwrite <span class="op">=</span> <span class="cn">FALSE</span>,
                                                append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><strong>Step 3:</strong> Then use <code>extract_first_or_last_clinical_event</code> to identify participants with specific codes of interest in their record. See the <a href="https://dbplyr.tidyverse.org/articles/dbplyr.html">dbplyr getting started vignette</a> for a good overview of querying databases using <code>dplyr</code> syntax.</p>
<blockquote>
<p><strong>NOTE:</strong> To improve search performance, set an index on the ‘code’ column (this will be filtered on most frequently) for example:</p>
</blockquote>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sql_index_source</span> <span class="op">&lt;-</span> <span class="st">"CREATE INDEX idx_clinical_events_source ON clinical_events (source);"</span>
<span class="va">sql_index_code</span> <span class="op">&lt;-</span> <span class="st">"CREATE INDEX idx_clinical_events_code ON clinical_events (code);"</span>
<span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbSendQuery.html">dbSendQuery</a></span><span class="op">(</span><span class="va">con</span>, statement <span class="op">=</span> <span class="va">sql_index_source</span><span class="op">)</span>
<span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbSendQuery.html">dbSendQuery</a></span><span class="op">(</span><span class="va">con</span>, statement <span class="op">=</span> <span class="va">sql_index_code</span><span class="op">)</span></code></pre></div>
<blockquote>
<p><strong>NOTE:</strong> To remove a table, use <code><a href="https://dbi.r-dbi.org/reference/dbRemoveTable.html">DBI::dbRemoveTable(conn, 'table_name')</a></code>.</p>
</blockquote>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alasdair Warwick.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
