<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ukbwranglr • ukbwranglr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ukbwranglr">
<meta property="og:description" content="ukbwranglr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ukbwranglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ukbwranglr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rmgpanw/ukbwranglr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ukbwranglr_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ukbwranglr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rmgpanw/ukbwranglr/blob/HEAD/vignettes/ukbwranglr.Rmd" class="external-link"><code>vignettes/ukbwranglr.Rmd</code></a></small>
      <div class="hidden name"><code>ukbwranglr.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rmgpanw.github.io/ukbwranglr/" class="external-link">ukbwranglr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyselect.r-lib.org" class="external-link">tidyselect</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The basic workflow is as follows:</p>
<ol style="list-style-type: decimal">
<li>Create a data dictionary for your main UK Biobank dataset with <code><a href="../reference/make_data_dict.html">make_data_dict()</a></code>.</li>
<li>Read selected variables into R with <code><a href="../reference/read_ukb.html">read_ukb()</a></code>.</li>
<li>Summarise continuous variables with <code><a href="../reference/summarise_numerical_variables.html">summarise_numerical_variables()</a></code>.</li>
<li>Tidy clinical events data with <code><a href="../reference/tidy_clinical_events.html">tidy_clinical_events()</a></code> or <code><a href="../reference/make_clinical_events_db.html">make_clinical_events_db()</a></code>, and extract outcomes of interest with <code><a href="../reference/extract_phenotypes.html">extract_phenotypes()</a></code>.</li>
<li>Analyse.</li>
</ol>
<p>These steps are now illustrated with a dummy dataset included with ukbwranglr:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># path to dummy data</span>
<span class="va">ukb_main_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_ukb_main.tsv"</span>,
                                     path_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># raw data</span>
<span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_tsv</a></span><span class="op">(</span><span class="va">ukb_main_path</span><span class="op">)</span>
<span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">10</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">71</span></span>
<span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span>
<span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> "\t"</span>
<span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (14): 41270-0.0, 41270-0.3, 41271-0.0, 40001-0.0, 40001-1.0, 40002-0.0,...</span>
<span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (43): eid, 31-0.0, 34-0.0, 52-0.0, 21000-0.0, 21000-1.0, 21000-2.0, 210...</span>
<span class="co">#&gt; <span style="color: #0000BB;">date</span> (14): 41280-0.0, 41280-0.3, 41281-0.0, 41281-0.3, 40000-0.0, 40000-1.0,...</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span>
<span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 71</span></span>
<span class="co">#&gt;      eid `31-0.0` `34-0.0` `52-0.0` `21000-0.0` `21000-1.0` `21000-2.0`</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1        0     <span style="text-decoration: underline;">1</span>952        8          -<span style="color: #BB0000;">1</span>           2        <span style="text-decoration: underline;">3</span>003</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2        0     <span style="text-decoration: underline;">1</span>946        3          -<span style="color: #BB0000;">3</span>        <span style="text-decoration: underline;">2</span>001        <span style="text-decoration: underline;">3</span>004</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3        1     <span style="text-decoration: underline;">1</span>951        4           1        <span style="text-decoration: underline;">2</span>002          -<span style="color: #BB0000;">1</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4        0     <span style="text-decoration: underline;">1</span>956        9        <span style="text-decoration: underline;">1</span>001        <span style="text-decoration: underline;">2</span>003        <span style="text-decoration: underline;">4</span>001</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     5       <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>        4        <span style="text-decoration: underline;">1</span>002        <span style="text-decoration: underline;">2</span>004        <span style="text-decoration: underline;">4</span>002</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     6        1     <span style="text-decoration: underline;">1</span>948        2        <span style="text-decoration: underline;">1</span>003           3        <span style="text-decoration: underline;">4</span>003</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     7        0     <span style="text-decoration: underline;">1</span>949       12          <span style="color: #BB0000;">NA</span>        <span style="text-decoration: underline;">3</span>001           5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     8        1     <span style="text-decoration: underline;">1</span>956       10          <span style="color: #BB0000;">NA</span>           5          <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     9        0     <span style="text-decoration: underline;">1</span>962        4        <span style="text-decoration: underline;">4</span>001          <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    10        1     <span style="text-decoration: underline;">1</span>953        2        <span style="text-decoration: underline;">4</span>001          <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 64 more variables: `21001-0.0` &lt;dbl&gt;, `21001-1.0` &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   `21001-2.0` &lt;dbl&gt;, `4080-0.0` &lt;dbl&gt;, `4080-0.1` &lt;dbl&gt;, `4080-0.2` &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   `4080-0.3` &lt;dbl&gt;, `4080-1.0` &lt;dbl&gt;, `4080-1.1` &lt;dbl&gt;, `4080-1.2` &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   `4080-1.3` &lt;dbl&gt;, `20001-0.0` &lt;dbl&gt;, `20001-0.3` &lt;dbl&gt;, `20001-2.0` &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   `20001-2.3` &lt;dbl&gt;, `20002-0.0` &lt;dbl&gt;, `20002-0.3` &lt;dbl&gt;, `20002-2.0` &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   `20002-2.3` &lt;dbl&gt;, `20006-0.0` &lt;dbl&gt;, `20006-0.3` &lt;dbl&gt;, `20006-2.0` &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   `20006-2.3` &lt;dbl&gt;, `20008-0.0` &lt;dbl&gt;, `20008-0.3` &lt;dbl&gt;, …</span></span></code></pre></div>
<p>You can try out the steps either locally by installing ukbwranglr on your own machine, or online by clicking on the following link to RStudio Cloud<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> and navigating to this Rmd file in the ‘vignettes’ directory: <a href="https://rstudio.cloud/project/2528744" class="external-link"><img src="https://img.shields.io/badge/RStudio-Cloud-blue" alt="Launch RStudio Cloud"></a></p>
</div>
<div class="section level2">
<h2 id="basic-workflow">Basic workflow<a class="anchor" aria-label="anchor" href="#basic-workflow"></a>
</h2>
<div class="section level3">
<h3 id="create-data-dictionary">1. Create data dictionary<a class="anchor" aria-label="anchor" href="#create-data-dictionary"></a>
</h3>
<p>First download a copy of the UK Biobank data dictionary and codings files from the <a href="https://biobank.ctsu.ox.ac.uk/crystal/exinfo.cgi?src=accessing_data_guide" class="external-link">UK Biobank data showcase website</a>. Dummy versions are used here:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get required metadata</span>
<span class="va">ukb_data_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_Data_Dictionary_Showcase.tsv"</span><span class="op">)</span>
<span class="va">ukb_codings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_Codings.tsv"</span><span class="op">)</span></code></pre></div>
<p>Then create a data dictionary using <code><a href="../reference/make_data_dict.html">make_data_dict()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># make data dictionary</span>
<span class="va">data_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_data_dict.html">make_data_dict</a></span><span class="op">(</span><span class="va">ukb_main_path</span>, 
                            ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span><span class="op">)</span>

<span class="va">data_dict</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 71 × 22</span></span>
<span class="co">#&gt;    descriptive_col… colheaders_raw colheaders_proc… FieldID instance array Path </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> eid              eid            feid             eid     <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> sex_f31_0_0      31-0.0         f31_0_0          31      0        0     Popu…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> year_of_birth_f… 34-0.0         f34_0_0          34      0        0     Popu…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> month_of_birth_… 52-0.0         f52_0_0          52      0        0     Popu…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ethnic_backgrou… 21000-0.0      f21000_0_0       21000   0        0     Asse…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ethnic_backgrou… 21000-1.0      f21000_1_0       21000   1        0     Asse…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ethnic_backgrou… 21000-2.0      f21000_2_0       21000   2        0     Asse…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> body_mass_index… 21001-0.0      f21001_0_0       21001   0        0     Asse…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> body_mass_index… 21001-1.0      f21001_1_0       21001   1        0     Asse…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> body_mass_index… 21001-2.0      f21001_2_0       21001   2        0     Asse…</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 61 more rows, and 15 more variables: Category &lt;chr&gt;, Field &lt;chr&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   Participants &lt;chr&gt;, Items &lt;chr&gt;, Stability &lt;chr&gt;, ValueType &lt;chr&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   Units &lt;chr&gt;, ItemType &lt;chr&gt;, Strata &lt;chr&gt;, Sexed &lt;chr&gt;, Instances &lt;chr&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   Array &lt;chr&gt;, Coding &lt;chr&gt;, Notes &lt;chr&gt;, Link &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="read-selected-variables-into-r">2. Read selected variables into R<a class="anchor" aria-label="anchor" href="#read-selected-variables-into-r"></a>
</h3>
<p>Read a main UK Biobank dataset into R using <code><a href="../reference/read_ukb.html">read_ukb()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/read_ukb.html">read_ukb</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">ukb_main_path</span>,
         ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span>,
         ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="co"># (convert to tibble for concise print method)</span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Creating data dictionary</span>
<span class="co">#&gt; STEP 1 of 3</span>
<span class="co">#&gt; Reading data into R</span>
<span class="co">#&gt; STEP 2 of 3</span>
<span class="co">#&gt; Renaming with descriptive column names</span>
<span class="co">#&gt; STEP 3 of 3</span>
<span class="co">#&gt; Applying variable and value labels</span>
<span class="co">#&gt; Labelling dataset</span>
<span class="co">#&gt; Time taken: 0 minutes, 0 seconds.</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 71</span></span>
<span class="co">#&gt;      eid sex_f31_0_0 year_of_birth_f34_0_0 month_of_birth_f52_… ethnic_backgrou…</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 Female                       <span style="text-decoration: underline;">1</span>952 August               Do not know     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 Female                       <span style="text-decoration: underline;">1</span>946 March                Prefer not to a…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3 Male                         <span style="text-decoration: underline;">1</span>951 April                White           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4 Female                       <span style="text-decoration: underline;">1</span>956 September            British         </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     5 <span style="color: #BB0000;">NA</span>                             <span style="color: #BB0000;">NA</span> April                Irish           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     6 Male                         <span style="text-decoration: underline;">1</span>948 February             Any other white…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     7 Female                       <span style="text-decoration: underline;">1</span>949 December             <span style="color: #BB0000;">NA</span>              </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     8 Male                         <span style="text-decoration: underline;">1</span>956 October              <span style="color: #BB0000;">NA</span>              </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     9 Female                       <span style="text-decoration: underline;">1</span>962 April                Caribbean       </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    10 Male                         <span style="text-decoration: underline;">1</span>953 February             Caribbean       </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 66 more variables: ethnic_background_f21000_1_0 &lt;fct&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   ethnic_background_f21000_2_0 &lt;fct&gt;, body_mass_index_bmi_f21001_0_0 &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   body_mass_index_bmi_f21001_1_0 &lt;dbl&gt;, body_mass_index_bmi_f21001_2_0 &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_0 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_1 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_2 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_3 &lt;int&gt;, …</span></span></code></pre></div>
<p>A UK Biobank main dataset file is typically too large to fit into memory on a personal computer. Often however, only a subset of the data is required. To read a selection of variables, filter the data dictionary created with <code><a href="../reference/make_data_dict.html">make_data_dict()</a></code> for a subset of variables and supply this to <code><a href="../reference/read_ukb.html">read_ukb()</a></code>:<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filter data dictionary for sex, year of birth, body mass index, systolic blood pressure, self-reported non-cancer illness and summary hospital diagnoses (ICD10) fields</span>
<span class="va">data_dict_selected</span> <span class="op">&lt;-</span> <span class="va">data_dict</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">FieldID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    <span class="co"># Participant ID</span>
    <span class="st">"eid"</span>,
    
    <span class="co"># Sex</span>
    <span class="st">"31"</span>,
    
    <span class="co"># Year of birth</span>
    <span class="st">"34"</span>,
    
    <span class="co"># Body mass index</span>
    <span class="st">"21001"</span>,
    
    <span class="co"># Systolic blood pressure</span>
    <span class="st">"4080"</span>,
    
    <span class="co"># Self-reported non-cancer medical conditions</span>
    <span class="st">"20002"</span>,
    <span class="st">"20008"</span>,
    
    <span class="co"># Summary hospital diagnoses (ICD10)</span>
    <span class="st">"41270"</span>,
    <span class="st">"41280"</span>
  <span class="op">)</span><span class="op">)</span>

<span class="co"># Read selected variables into R</span>
<span class="va">ukb_main</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ukb.html">read_ukb</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">ukb_main_path</span>,
         data_dict <span class="op">=</span> <span class="va">data_dict_selected</span>,
         ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span>,
         ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span><span class="op">)</span>
<span class="co">#&gt; STEP 1 of 3</span>
<span class="co">#&gt; Reading data into R</span>
<span class="co">#&gt; STEP 2 of 3</span>
<span class="co">#&gt; Renaming with descriptive column names</span>
<span class="co">#&gt; STEP 3 of 3</span>
<span class="co">#&gt; Applying variable and value labels</span>
<span class="co">#&gt; Labelling dataset</span>
<span class="co">#&gt; Time taken: 0 minutes, 0 seconds.</span>

<span class="co"># Convert to tibble for concise print method</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">ukb_main</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 26</span></span>
<span class="co">#&gt;      eid sex_f31_0_0 year_of_birth_f34_0_0 body_mass_index_bmi… body_mass_index…</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 Female                       <span style="text-decoration: underline;">1</span>952                 20.1             20.9</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 Female                       <span style="text-decoration: underline;">1</span>946                 30.2             20.2</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3 Male                         <span style="text-decoration: underline;">1</span>951                 22.8             26.8</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4 Female                       <span style="text-decoration: underline;">1</span>956                 <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     5 <span style="color: #BB0000;">NA</span>                             <span style="color: #BB0000;">NA</span>                 29.3             19.8</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     6 Male                         <span style="text-decoration: underline;">1</span>948                 28.3             30.3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     7 Female                       <span style="text-decoration: underline;">1</span>949                 <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     8 Male                         <span style="text-decoration: underline;">1</span>956                 <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     9 Female                       <span style="text-decoration: underline;">1</span>962                 25.4             21.9</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    10 Male                         <span style="text-decoration: underline;">1</span>953                 <span style="color: #BB0000;">NA</span>               25.2</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 21 more variables: body_mass_index_bmi_f21001_2_0 &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_0 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_1 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_2 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_0_3 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_1_0 &lt;int&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   systolic_blood_pressure_automated_reading_f4080_1_1 &lt;int&gt;, …</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarise-continuous-variables">3. Summarise continuous variables<a class="anchor" aria-label="anchor" href="#summarise-continuous-variables"></a>
</h3>
<p>Some variables such as body mass index and systolic blood pressure will have been measured on more than one occasion. In these cases it may be desirable to calculate a summary value (e.g. mean). Use <code><a href="../reference/summarise_numerical_variables.html">summarise_numerical_variables()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># calculate the mean value across all repeated continuous variable measurements</span>
<span class="va">ukb_main_numerical_vars_summarised</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summarise_numerical_variables.html">summarise_numerical_variables</a></span><span class="op">(</span>
  ukb_main <span class="op">=</span> <span class="va">ukb_main</span>,
  ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span>,
  summary_function <span class="op">=</span> <span class="st">"mean"</span>, 
  .drop <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="co"># reorder variables</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">eid</span>,
         <span class="va">sex_f31_0_0</span>,
         <span class="va">year_of_birth_f34_0_0</span>,
         <span class="va">mean_body_mass_index_bmi_x21001</span>,
         <span class="va">mean_systolic_blood_pressure_automated_reading_x4080</span><span class="op">)</span>
<span class="co">#&gt; Number of summary columns to make: 3</span>
<span class="co">#&gt; Time taken: 0 minutes, 0 seconds.</span>

<span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">ukb_main_numerical_vars_summarised</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 5</span></span>
<span class="co">#&gt;      eid sex_f31_0_0 year_of_birth_f34_0_0 mean_body_mass_inde… mean_systolic_b…</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 Female                       <span style="text-decoration: underline;">1</span>952                 20.5             138.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 Female                       <span style="text-decoration: underline;">1</span>946                 26.0             143.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3 Male                         <span style="text-decoration: underline;">1</span>951                 25.8             130.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4 Female                       <span style="text-decoration: underline;">1</span>956                <span style="color: #BB0000;">NaN</span>               <span style="color: #BB0000;">NaN</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     5 <span style="color: #BB0000;">NA</span>                             <span style="color: #BB0000;">NA</span>                 21.2             <span style="color: #BB0000;">NaN</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     6 Male                         <span style="text-decoration: underline;">1</span>948                 28.6             <span style="color: #BB0000;">NaN</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     7 Female                       <span style="text-decoration: underline;">1</span>949                <span style="color: #BB0000;">NaN</span>               <span style="color: #BB0000;">NaN</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     8 Male                         <span style="text-decoration: underline;">1</span>956                <span style="color: #BB0000;">NaN</span>               <span style="color: #BB0000;">NaN</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     9 Female                       <span style="text-decoration: underline;">1</span>962                 23.9             <span style="color: #BB0000;">NaN</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    10 Male                         <span style="text-decoration: underline;">1</span>953                 27.6             <span style="color: #BB0000;">NaN</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tidy-clinical-events-data-and-extract-outcomes-of-interest">4. Tidy clinical events data and extract outcomes of interest<a class="anchor" aria-label="anchor" href="#tidy-clinical-events-data-and-extract-outcomes-of-interest"></a>
</h3>
<p>Use <code><a href="../reference/tidy_clinical_events.html">tidy_clinical_events()</a></code> to reshape clinical events fields (such as self-reported non-cancer medical conditions) to long format:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># tidy clinical events</span>
<span class="va">clinical_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tidy_clinical_events.html">tidy_clinical_events</a></span><span class="op">(</span>
  ukb_main <span class="op">=</span> <span class="va">ukb_main</span>, 
  ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span>, 
  ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span>,
  clinical_events_sources <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"self_report_non_cancer"</span>,
                              <span class="st">"summary_hes_icd10"</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; Tidying clinical events for self_report_non_cancer</span>
<span class="co">#&gt; Time taken: 0 minutes, 0 seconds.</span>
<span class="co">#&gt; Tidying clinical events for summary_hes_icd10</span>
<span class="co">#&gt; Time taken: 0 minutes, 0 seconds.</span>

<span class="co"># returns a named list of data frames</span>
<span class="va">clinical_events</span>
<span class="co">#&gt; $self_report_non_cancer</span>
<span class="co">#&gt;    eid source index code       date</span>
<span class="co">#&gt; 1:   1 f20002   0_0 1665 1998-12-24</span>
<span class="co">#&gt; 2:   2 f20002   0_0 1383 2011-01-05</span>
<span class="co">#&gt; 3:   3 f20002   0_0 1665       &lt;NA&gt;</span>
<span class="co">#&gt; 4:   4 f20002   0_0 1383       &lt;NA&gt;</span>
<span class="co">#&gt; 5:   1 f20002   0_3 1223 2003-02-25</span>
<span class="co">#&gt; 6:   2 f20002   0_3 1352 2020-07-02</span>
<span class="co">#&gt; 7:   1 f20002   2_0 1514 2011-04-07</span>
<span class="co">#&gt; 8:   2 f20002   2_0 1447 1981-03-01</span>
<span class="co">#&gt; 9:   2 f20002   2_3 1165 1983-01-03</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $summary_hes_icd10</span>
<span class="co">#&gt;    eid source index  code       date</span>
<span class="co">#&gt; 1:   1 f41270   0_0  X715 1955-11-12</span>
<span class="co">#&gt; 2:   2 f41270   0_0   E11 1939-02-16</span>
<span class="co">#&gt; 3:   1 f41270   0_3   E10 1910-02-19</span>
<span class="co">#&gt; 4:   2 f41270   0_3 M0087 1965-08-08</span>

<span class="co"># combine with dplyr</span>
<span class="va">clinical_events</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">clinical_events</span><span class="op">)</span>

<span class="va">clinical_events</span>
<span class="co">#&gt;     eid source index  code       date</span>
<span class="co">#&gt;  1:   1 f20002   0_0  1665 1998-12-24</span>
<span class="co">#&gt;  2:   2 f20002   0_0  1383 2011-01-05</span>
<span class="co">#&gt;  3:   3 f20002   0_0  1665       &lt;NA&gt;</span>
<span class="co">#&gt;  4:   4 f20002   0_0  1383       &lt;NA&gt;</span>
<span class="co">#&gt;  5:   1 f20002   0_3  1223 2003-02-25</span>
<span class="co">#&gt;  6:   2 f20002   0_3  1352 2020-07-02</span>
<span class="co">#&gt;  7:   1 f20002   2_0  1514 2011-04-07</span>
<span class="co">#&gt;  8:   2 f20002   2_0  1447 1981-03-01</span>
<span class="co">#&gt;  9:   2 f20002   2_3  1165 1983-01-03</span>
<span class="co">#&gt; 10:   1 f41270   0_0  X715 1955-11-12</span>
<span class="co">#&gt; 11:   2 f41270   0_0   E11 1939-02-16</span>
<span class="co">#&gt; 12:   1 f41270   0_3   E10 1910-02-19</span>
<span class="co">#&gt; 13:   2 f41270   0_3 M0087 1965-08-08</span></code></pre></div>
<p>To identify participants with a condition of interest, first decide which codes will capture this. For example, the following includes a (non-exhaustive) list of clinical codes for diabetes:<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/example_clinical_codes.html">example_clinical_codes</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 6</span></span>
<span class="co">#&gt;   disease  description                           category code_type code  author</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Diabetes diabetes                              Diabete… data_cod… 1220  ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Diabetes gestational diabetes                  Gestati… data_cod… 1221  ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Diabetes type 1 diabetes                       Type 1 … data_cod… 1222  ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Diabetes type 2 diabetes                       Type 2 … data_cod… 1223  ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Diabetes Type 1 diabetes mellitus              Type 1 … icd10     E10   ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Diabetes Type 2 diabetes mellitus              Type 2 … icd10     E11   ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Diabetes Insulin dependent diabetes mellitus   Type 1 … read2     C108. ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Diabetes Non-insulin dependent diabetes melli… Type 2 … read2     C109. ukbwr</span></code></pre></div>
<p>Supply this to <code><a href="../reference/extract_phenotypes.html">extract_phenotypes()</a></code> to filter for participants who have any matching clinical codes in their records. By default, only the earliest date is extracted:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># extract phenotypes</span>
<span class="va">diabetes_cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_phenotypes.html">extract_phenotypes</a></span><span class="op">(</span>clinical_events <span class="op">=</span> <span class="va">clinical_events</span>,
                                     clinical_codes <span class="op">=</span> <span class="fu"><a href="../reference/example_clinical_codes.html">example_clinical_codes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Filtering for requested clinical codes/sources</span>
<span class="co">#&gt; Joining filtered events with clinical codelist</span>
<span class="co">#&gt; Time taken: 0 minutes, 0 seconds.</span>

<span class="va">diabetes_cases</span>
<span class="co">#&gt;    eid source index code       date     code_type  disease  category author</span>
<span class="co">#&gt; 1:   1 f20002   0_3 1223 2003-02-25 data_coding_6 Diabetes Type 2 DM  ukbwr</span>
<span class="co">#&gt; 2:   2 f41270   0_0  E11 1939-02-16         icd10 Diabetes Type 2 DM  ukbwr</span>
<span class="co">#&gt; 3:   1 f41270   0_3  E10 1910-02-19         icd10 Diabetes Type 1 DM  ukbwr</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="analyse">5. Analyse<a class="anchor" aria-label="anchor" href="#analyse"></a>
</h3>
<p>Merge the output from steps 4 and 5:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ukb_main_processed</span> <span class="op">&lt;-</span>
  <span class="co"># first summarise `diabetes_cases` - for each eid, get the earliest date</span>
  <span class="va">diabetes_cases</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">eid</span>,
           <span class="va">disease</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>diabetes_min_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">date</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  
  <span class="co"># create indicator column for diabetes</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>diabetes_indicator <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">diabetes_min_date</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Yes"</span>,
                                        <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"No"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  
  <span class="co"># join with `ukb_main_numerical_vars_summarised`</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span><span class="va">ukb_main_numerical_vars_summarised</span>,
                   by <span class="op">=</span> <span class="st">"eid"</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` has grouped output by 'eid'. You can override using the `.groups`</span>
<span class="co">#&gt; argument.</span>

<span class="va">ukb_main_processed</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 8</span></span>
<span class="co">#&gt;      eid disease  diabetes_min_da… diabetes_indica… sex_f31_0_0 year_of_birth_f…</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 Diabetes 1910-02-19       Yes              Female                  <span style="text-decoration: underline;">1</span>952</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 Diabetes 1939-02-16       Yes              Female                  <span style="text-decoration: underline;">1</span>946</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     3 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               Male                    <span style="text-decoration: underline;">1</span>951</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     4 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               Female                  <span style="text-decoration: underline;">1</span>956</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     5 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>                        <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     6 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               Male                    <span style="text-decoration: underline;">1</span>948</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     7 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               Female                  <span style="text-decoration: underline;">1</span>949</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     8 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               Male                    <span style="text-decoration: underline;">1</span>956</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     9 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               Female                  <span style="text-decoration: underline;">1</span>962</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    10 <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span>               Male                    <span style="text-decoration: underline;">1</span>953</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 2 more variables: mean_body_mass_index_bmi_x21001 &lt;dbl&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   mean_systolic_blood_pressure_automated_reading_x4080 &lt;dbl&gt;</span></span></code></pre></div>
<p>Describe:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ukb_main_processed</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">eid</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">diabetes_indicator</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>pct_female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">sex_f31_0_0</span> <span class="op">==</span> <span class="st">"Female"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,
            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 5</span></span>
<span class="co">#&gt;   diabetes_indica… pct_female year_of_birth_f… mean_body_mass_… mean_systolic_b…</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Yes                   1                <span style="text-decoration: underline;">1</span>949              23.2             141.</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> <span style="color: #BB0000;">NA</span>                    0.375            <span style="text-decoration: underline;">1</span>954.             25.4             130.</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="setup-for-multiple-projects">Setup for multiple projects<a class="anchor" aria-label="anchor" href="#setup-for-multiple-projects"></a>
</h2>
<p>The following setup is recommended to reduce duplicated steps between multiple projects that draw on the same datasets:</p>
<ol style="list-style-type: decimal">
<li>
<p>Download the UK Biobank data dictionary and codings files (available from the <a href="https://biobank.ctsu.ox.ac.uk/crystal/exinfo.cgi?src=accessing_data_guide" class="external-link">UK Biobank data showcase</a>) and for each new R project, place the following <code>.Renviron</code> file in the project root directory (replacing <code>PATH/TO</code> with the correct file paths):</p>
<pre><code>UKB_DATA_DICT=/PATH/TO/Data_Dictionary_Showcase.tsv

UKB_CODINGS=/PATH/TO/Codings.tsv</code></pre>
<p>Functions with arguments <code>ukb_data_dict</code> and <code>ukb_codings</code> use <code><a href="../reference/get_ukb_data_dict.html">get_ukb_data_dict()</a></code> and <code><a href="../reference/get_ukb_codings.html">get_ukb_codings()</a></code> by default, which will automatically search for environmental variables <code>UKB_DATA_DICT</code> and <code>UKB_CODINGS</code> and read the files from these locations.</p>
</li>
<li><p>Create a clinical events database using <code><a href="../reference/make_clinical_events_db.html">make_clinical_events_db()</a></code>. This function includes the option to incorporate <a href="https://biobank.ndph.ox.ac.uk/ukb/label.cgi?id=3000" title="Primary care health-related outcomes" class="external-link">primary care data</a>.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> Having connected to the database, phenotypes may be extracted with <code><a href="../reference/extract_phenotypes.html">extract_phenotypes()</a></code>:</p></li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># build dummy clinical events SQLite DB in tempdir</span>
<span class="va">ukb_db_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".db"</span><span class="op">)</span>

<span class="fu"><a href="../reference/make_clinical_events_db.html">make_clinical_events_db</a></span><span class="op">(</span>ukb_main_path <span class="op">=</span> <span class="va">ukb_main_path</span>,
                        ukb_db_path <span class="op">=</span> <span class="va">ukb_db_path</span>, 
                        gp_clinical_path <span class="op">=</span> <span class="fu"><a href="../reference/get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_gp_clinical.txt"</span>,
                                                         path_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                        gp_scripts_path <span class="op">=</span> <span class="fu"><a href="../reference/get_ukb_dummy.html">get_ukb_dummy</a></span><span class="op">(</span><span class="st">"dummy_gp_scripts.txt"</span>,
                                                         path_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, 
                        ukb_data_dict <span class="op">=</span> <span class="va">ukb_data_dict</span>,
                        ukb_codings <span class="op">=</span> <span class="va">ukb_codings</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Connect to the database</span>
<span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, 
                      <span class="va">ukb_db_path</span><span class="op">)</span>

<span class="co"># Convert to a named list of dbplyr::tbl_dbi objects</span>
<span class="va">ukbdb</span> <span class="op">&lt;-</span> <span class="fu">ukbwranglr</span><span class="fu">::</span><span class="fu"><a href="../reference/db_tables_to_list.html">db_tables_to_list</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span>

<span class="co"># Value columns (from `gp_clinical.txt`) and prescription names/quantities (from `gp_scripts.txt`) are stored separately from the main `clinical_events` table</span>
<span class="va">ukbdb</span>
<span class="co">#&gt; $clinical_events</span>
<span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;clinical_events&gt; [?? x 5]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Database: sqlite 3.38.5 [/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/Rtmp1Frwoe/fileb59b98a9c5.db]</span></span>
<span class="co">#&gt;      eid source index code       date      </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1 f40001 0_0   X095       1917-10-08</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2 f40001 0_0   A162       1955-02-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     1 f40001 1_0   X095       1910-02-19</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     2 f40001 1_0   A162       1965-08-08</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     1 f40002 0_0   W192       1917-10-08</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     2 f40002 0_0   V374       1955-02-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     1 f40002 1_3   X715       1910-02-19</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     1 f20003 0_0   1140861958 1955-02-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     2 f20003 0_0   1141146234 1965-08-08</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     1 f20003 2_0   1141146188 1910-02-19</span>
<span class="co">#&gt; <span style="color: #949494;"># … with more rows</span></span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $gp_clinical_values</span>
<span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;gp_clinical_values&gt; [?? x 4]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Database: sqlite 3.38.5 [/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/Rtmp1Frwoe/fileb59b98a9c5.db]</span></span>
<span class="co">#&gt;    index value1 value2 value3</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1     1      2      3     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2     1      2      3     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3     1      2      3     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4     1      2      3     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5     1      2      3     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6     1      2      3     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #949494;"># … with more rows</span></span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $gp_scripts_names_and_quantities</span>
<span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;gp_scripts_names_and_quantities&gt; [6 x 3]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Database: sqlite 3.38.5 [/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/Rtmp1Frwoe/fileb59b98a9c5.db]</span></span>
<span class="co">#&gt;   index drug_name quantity</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1     drug2     50      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3     drug2     30      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4     drug2     30      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5     drug2     30      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 6     2         30</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># extract phenotypes</span>
<span class="va">diabetes_cases</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/extract_phenotypes.html">extract_phenotypes</a></span><span class="op">(</span>clinical_events <span class="op">=</span> <span class="va">ukbdb</span><span class="op">$</span><span class="va">clinical_events</span>,
                     clinical_codes <span class="op">=</span> <span class="fu"><a href="../reference/example_clinical_codes.html">example_clinical_codes</a></span><span class="op">(</span><span class="op">)</span>,
                     verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">diabetes_cases</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 9</span></span>
<span class="co">#&gt;     eid source       index code  date       code_type    disease category author</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 f20002       0_3   1223  2003-02-25 data_coding… Diabet… Type 2 … ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1 gpc1_r2      7     C108. 1990-10-01 read2        Diabet… Type 1 … ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1 gpc1_r2      11    C108. 1990-10-03 read2        Diabet… Type 1 … ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     2 gpc2_r2      8     C109. 1990-10-02 read2        Diabet… Type 2 … ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     2 gpc2_r2      12    C109. 1990-10-04 read2        Diabet… Type 2 … ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     1 f41270       0_3   E10   1910-02-19 icd10        Diabet… Type 1 … ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">7</span>     1 f20002_icd10 0_3   E11   2003-02-25 icd10        Diabet… Type 2 … ukbwr </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">8</span>     2 f41270       0_0   E11   1939-02-16 icd10        Diabet… Type 2 … ukbwr</span></code></pre></div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>You will be asked to sign up for a free account if you do not have one already.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>It may be preferable at this stage to write the data dictionary to a csv file (using <code><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">readr::write_csv()</a></code>), manually filter in a text editor like Microsoft Excel, then reload into R (using <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv()</a></code>).<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>The <a href="https://rmgpanw.github.io/codemapper/" title="codemapper" class="external-link">codemapper package</a> includes functions to facilitate building clinical code lists.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>It will take \~1 hour to run if including both the primary care clinical event records and prescription records datasets.<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Alasdair Warwick.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
